<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kolasib District Weather</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Simple animation for card fade-in */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .weather-card {
            animation: fadeIn 0.5s ease-out forwards;
        }
        /* Style for the refresh button */
        #refresh-btn:disabled {
            cursor: not-allowed;
            opacity: 0.6;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8">
        <!-- Header Section -->
        <header class="text-center mb-6">
            <h1 class="text-3xl sm:text-4xl font-bold text-gray-900">Kolasib District Weather</h1>
            <p class="text-gray-600 mt-2">Live weather conditions for all villages</p>
        </header>

        <!-- Control and Status Section -->
        <div class="flex flex-col sm:flex-row justify-center items-center gap-4 mb-6 text-center">
            <button id="refresh-btn" class="bg-blue-600 text-white font-semibold py-2 px-5 rounded-lg shadow-md hover:bg-blue-700 transition-colors duration-300">
                Refresh Now
            </button>
            <div id="status-container" class="text-gray-500">
                <p id="loading">Fetching latest weather data...</p>
                <p id="last-updated" class="hidden"></p>
            </div>
        </div>

        <!-- Weather Cards Grid -->
        <main id="weather-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6">
            <!-- Weather cards will be inserted here by JavaScript -->
        </main>
    </div>

    <script>
        // --- CONFIGURATION ---
        const REFRESH_INTERVAL = 5 * 60 * 1000; // 5 minutes in milliseconds

        // --- DOM ELEMENTS ---
        const weatherGrid = document.getElementById('weather-grid');
        const loadingIndicator = document.getElementById('loading');
        const lastUpdatedText = document.getElementById('last-updated');
        const refreshBtn = document.getElementById('refresh-btn');

        // --- DATA ---
        const villages = [
            "LUNGDAI", "SENTLANG", "MUALKHANG", "SERKHAN", "ZANLAWN", "KHAMRANG", 
            "NISAPUI", "LUNGLMUAT", "MUALVUM", "KAWNPUI", "HORTOKI", "BUALPUI", 
            "DILZAU", "THINGDAWL", "N CHALTLANG", "BUKPUI", "BAIRABI", "MEIDUM", 
            "SETHAWN", "PANGBALKAWN", "KOLASIB", "VAIRENGTE", "SAIHAPUI V", 
            "PHAINUAM", "N CHHIMLUANG", "SAIPHAI", "SAIPUM", "N CHAWNPUI", 
            "BILKHAWTHLIR", "PHAISEN", "BUHCHANGPHAI", "BUKVANNEI", "N THINGLIAN", 
            "SAIHAPUI K", "THINGTHELH", "N HLIMEN", "NEW BUILUM", "RASTALI", "S CHHIMLUANG"
        ];

        const weatherConditions = [
            { condition: 'Sunny', icon: '‚òÄÔ∏è' },
            { condition: 'Cloudy', icon: '‚òÅÔ∏è' },
            { condition: 'Rainy', icon: 'üåßÔ∏è' },
            { condition: 'Partly Cloudy', icon: '‚õÖ' },
            { condition: 'Thunderstorm', icon: '‚õàÔ∏è' },
            { condition: 'Windy', icon: 'üí®' }
        ];

        // --- CORE LOGIC ---

        /**
         * Simulates fetching weather data for a specific village.
         * @param {string} villageName - The name of the village.
         * @returns {Promise<object>} A promise that resolves with weather data.
         */
        function getWeatherData(villageName) {
            return new Promise(resolve => {
                setTimeout(() => {
                    const randomCondition = weatherConditions[Math.floor(Math.random() * weatherConditions.length)];
                    const randomTemp = (Math.random() * (32 - 18) + 18).toFixed(1);
                    resolve({ village: villageName, temperature: randomTemp, ...randomCondition });
                }, Math.random() * 1500);
            });
        }

        /**
         * Creates an HTML element for a weather card.
         * @param {object} data - The weather data for a village.
         * @returns {HTMLElement} The created card element.
         */
        function createWeatherCard(data) {
            const card = document.createElement('div');
            card.className = 'weather-card bg-white p-5 rounded-xl shadow-md flex flex-col items-center text-center transition-transform transform hover:scale-105';
            card.style.opacity = '0'; // Start transparent for animation
            card.innerHTML = `
                <h2 class="text-lg font-bold text-gray-800">${data.village}</h2>
                <div class="text-6xl my-3">${data.icon}</div>
                <p class="text-3xl font-semibold text-gray-900">${data.temperature}¬∞C</p>
                <p class="text-gray-500 mt-1">${data.condition}</p>
            `;
            // Trigger the animation
            setTimeout(() => { card.style.opacity = '1'; }, 10);
            return card;
        }

        /**
         * Fetches new data and updates the UI.
         */
        async function fetchAndDisplayWeather() {
            // 1. Set UI to loading state
            loadingIndicator.textContent = 'Refreshing weather data...';
            loadingIndicator.classList.remove('hidden');
            lastUpdatedText.classList.add('hidden');
            refreshBtn.disabled = true;
            weatherGrid.innerHTML = ''; // Clear old cards

            // 2. Fetch all data concurrently
            const weatherPromises = villages.map(village => getWeatherData(village));
            const weatherDataArray = await Promise.all(weatherPromises);

            // 3. Update UI with new data
            loadingIndicator.classList.add('hidden');
            
            const now = new Date();
            lastUpdatedText.textContent = `Last updated: ${now.toLocaleTimeString()}`;
            lastUpdatedText.classList.remove('hidden');
            
            refreshBtn.disabled = false;

            // 4. Create and append new cards
            weatherDataArray.forEach(data => {
                const card = createWeatherCard(data);
                weatherGrid.appendChild(card);
            });
        }

        /**
         * Main function to initialize the application.
         */
        function initializeApp() {
            // Add event listener for the manual refresh button
            refreshBtn.addEventListener('click', fetchAndDisplayWeather);

            // Perform the initial data fetch
            fetchAndDisplayWeather();

            // Set up the automatic refresh interval
            setInterval(fetchAndDisplayWeather, REFRESH_INTERVAL);
        }

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>
</html>
